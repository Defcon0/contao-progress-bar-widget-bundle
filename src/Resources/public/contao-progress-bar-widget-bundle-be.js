!function(){"use strict";utilsBundle;function e(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,s,a=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){u=!0,s=e}finally{try{o||null==r.return||r.return()}finally{if(u)throw s}}return a}(e,r)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,s,a;return n=t,a=[{key:"init",value:function(){t.initAjaxReload()}},{key:"initAjaxReload",value:function(){var e=document.querySelectorAll(".huh-progress-bar");e.length<1||(t.updateWidgets(e),setInterval((function(){t.updateWidgets(e)}),2e3))}},{key:"updateWidgets",value:function(t){t.forEach((function(t){"in_progress"===t.getAttribute("data-state")&&utilsBundle.ajax.get(t.getAttribute("data-progress-url"),{},{onSuccess:function(r){var n=JSON.parse(r.responseText);if(t.setAttribute("data-state",n.state),t.querySelector(".progress-bar > span").style="width: "+100*n.currentProgress/n.totalCount+"%",null!==t.querySelector(".numbers")&&(t.querySelector(".numbers .current-progress").innerHTML=n.currentProgress,t.querySelector(".numbers .total-count").innerHTML=n.totalCount,t.querySelector(".numbers .skipped-count").innerHTML=n.skippedCount),null!==t.querySelector(".messages")&&n.hasOwnProperty("messages")&&n.messages.length>0){var s=[];t.querySelector(".messages").classList.contains("invisible")&&t.querySelector(".messages").classList.remove("invisible");for(var a=0,o=Object.entries(n.messages);a<o.length;a++){var u=e(o[a],2),i=(u[0],u[1]);console.log(i),s.push('<p class="'+i.class+'">'+i.text+"</p>")}t.querySelector(".messages .wrapper").innerHTML=s.join("")}else t.querySelector(".messages").classList.contains("invisible")||t.querySelector(".messages").classList.add("invisible")}})}))}}],(s=null)&&r(n.prototype,s),a&&r(n,a),t}();document.addEventListener("DOMContentLoaded",n.init)}();